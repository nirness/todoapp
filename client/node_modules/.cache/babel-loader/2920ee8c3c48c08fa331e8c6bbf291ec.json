{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\";\nimport protectedRequest from \"../../scripts/protectedRequest\";\nexport const thunks = {\n  fetchTodos: createAsyncThunk(\"todos/fetchTodos\", async (_, thunkAPI) => thunkPromiseHandler(protectedRequest().get(\"/api/todos/me\"), thunkAPI)),\n  createTodo: createAsyncThunk(\"todos/createTodo\", async (todo, thunkAPI) => thunkPromiseHandler(protectedRequest().post(\"/api/todos\", todo), thunkAPI)),\n  updateTodo: createAsyncThunk(\"todos/updateTodo\", async (todo, thunkAPI) => thunkPromiseHandler(protectedRequest().put(`/api/todos/${todo._id}`, todo), thunkAPI)),\n  deleteTodo: createAsyncThunk(\"todos/deleteTodo\", async (todo, thunkAPI) => thunkPromiseHandler(protectedRequest().delete(`/api/todos/${todo._id}`), thunkAPI)),\n  deleteAll: createAsyncThunk(\"todos/deleteAll\", async (_, thunkAPI) => thunkPromiseHandler(protectedRequest().delete(\"/api/todos/me\"), thunkAPI))\n};\nexport const {\n  reducer,\n  actions\n} = createSlice({\n  name: \"todos\",\n  initialState: {\n    isLoading: false,\n    todos: [],\n    numDispatches: 0\n  },\n  reducers: {},\n\n  extraReducers(_ref) {\n    let {\n      addCase\n    } = _ref;\n    addCase(thunks.fetchTodos.pending, state => {\n      state.isLoading = true;\n    });\n    addCase(thunks.fetchTodos.fulfilled, (state, _ref2) => {\n      let {\n        payload: todos\n      } = _ref2;\n      state.isLoading = false;\n      state.todos = todos;\n    });\n    addCase(thunks.fetchTodos.rejected, (state, _ref3) => {\n      let {\n        payload: errorMessage\n      } = _ref3;\n      state.isLoading = false;\n      alert(errorMessage);\n    }); //add cases to all the thunks except fetchtodos\n\n    helper.methods.forEach(n => {});\n  }\n\n});\nconst helper = {\n  methods: [\"createTodo\", \"updateTodo\", \"deleteTodo\", \"deleteAll\"],\n\n  pending(state) {\n    state.isLoading = true;\n  },\n\n  fulfilled(state) {\n    state.numDispatches++;\n    state.isLoading = false;\n  },\n\n  rejected(state, _ref4) {\n    let {\n      payload: errorMessage\n    } = _ref4;\n    state.isLoading = false;\n    alert(errorMessage);\n  }\n\n};","map":{"version":3,"names":["createSlice","createAsyncThunk","thunkPromiseHandler","protectedRequest","thunks","fetchTodos","_","thunkAPI","get","createTodo","todo","post","updateTodo","put","_id","deleteTodo","delete","deleteAll","reducer","actions","name","initialState","isLoading","todos","numDispatches","reducers","extraReducers","addCase","pending","state","fulfilled","payload","rejected","errorMessage","alert","helper","methods","forEach","n"],"sources":["/Users/nirness/Desktop/mern-todos-application/client/src/global/slices/todosSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\"\nimport protectedRequest from \"../../scripts/protectedRequest\"\n\nexport const thunks = {\n    fetchTodos : createAsyncThunk(\"todos/fetchTodos\", async (_, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().get(\"/api/todos/me\"), thunkAPI)\n    )),\n    createTodo : createAsyncThunk(\"todos/createTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().post(\"/api/todos\", todo), thunkAPI)\n    )),\n    updateTodo : createAsyncThunk(\"todos/updateTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().put(`/api/todos/${todo._id}`, todo), thunkAPI)\n    )),\n    deleteTodo : createAsyncThunk(\"todos/deleteTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().delete(`/api/todos/${todo._id}`), thunkAPI)\n    )),\n    deleteAll : createAsyncThunk(\"todos/deleteAll\", async (_, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().delete(\"/api/todos/me\"), thunkAPI)\n    )),\n}\n\nexport const { reducer, actions } = createSlice({\n    name: \"todos\", \n    initialState : {\n        isLoading : false, \n        todos : [],\n        numDispatches : 0\n    },\n    reducers : { },\n    extraReducers({addCase}) {\n        addCase(thunks.fetchTodos.pending, (state) => {\n            state.isLoading = true\n        })\n        addCase(thunks.fetchTodos.fulfilled, (state, { payload:todos }) => {\n            state.isLoading = false\n            state.todos = todos\n        })\n        addCase(thunks.fetchTodos.rejected, (state, { payload:errorMessage}) => {\n            state.isLoading = false\n            alert(errorMessage)\n        })\n        //add cases to all the thunks except fetchtodos\n        helper.methods.forEach((n) => {\n            \n        })\n    }\n})\n\nconst helper = {\n    methods : [\"createTodo\", \"updateTodo\", \"deleteTodo\", \"deleteAll\" ],\n    pending (state) {\n        state.isLoading = true\n    },\n    fulfilled (state) {\n        state.numDispatches++\n        state.isLoading = false\n    },\n    rejected (state, { payload:errorMessage }) {\n        state.isLoading = false\n        alert(errorMessage)\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}