{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nirness/Desktop/mern-todos-application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nirness/Desktop/mern-todos-application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import thunkPromiseHandler from\"../../scripts/thunkPromiseHandler\";import protectedRequest from\"../../scripts/protectedRequest\";export var thunks={fetchTodos:createAsyncThunk(\"todos/fetchTodos\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,thunkAPI){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",thunkPromiseHandler(protectedRequest().get(\"/api/todos/me\"),thunkAPI));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}()),createTodo:createAsyncThunk(\"todos/createTodo\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(todo,thunkAPI){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",thunkPromiseHandler(protectedRequest().post(\"/api/todos\",todo),thunkAPI));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}()),updateTodo:createAsyncThunk(\"todos/updateTodo\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(todo,thunkAPI){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",thunkPromiseHandler(protectedRequest().put(\"/api/todos/\".concat(todo._id),todo),thunkAPI));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}()),deleteTodo:createAsyncThunk(\"todos/deleteTodo\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(todo,thunkAPI){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",thunkPromiseHandler(protectedRequest().delete(\"/api/todos/\".concat(todo._id)),thunkAPI));case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}()),deleteAll:createAsyncThunk(\"todos/deleteAll\",/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_,thunkAPI){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt(\"return\",thunkPromiseHandler(protectedRequest().delete(\"/api/todos/me\"),thunkAPI));case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}())};var _createSlice=createSlice({name:\"todos\",initialState:{isLoading:false,todos:[],numDispatches:0},reducers:{clearTodos:function clearTodos(state){state.todos=[];state.numDispatches=0;}},extraReducers:function extraReducers(_ref6){var addCase=_ref6.addCase;addCase(thunks.fetchTodos.pending,function(state){state.isLoading=true;});addCase(thunks.fetchTodos.fulfilled,function(state,_ref7){var todos=_ref7.payload;state.isLoading=false;state.todos=todos;});addCase(thunks.fetchTodos.rejected,function(state,_ref8){var errorMessage=_ref8.payload;state.isLoading=false;alert(errorMessage);});//add cases to all the thunks except fetchtodos\nhelper.methods.forEach(function(n){addCase(thunks[n].pending,helper.pending);addCase(thunks[n].fulfilled,helper.fulfilled);addCase(thunks[n].rejected,helper.rejected);});}}),reducer=_createSlice.reducer,actions=_createSlice.actions;export{reducer,actions};var helper={methods:[\"createTodo\",\"updateTodo\",\"deleteTodo\",\"deleteAll\"],pending:function pending(state){state.isLoading=true;},fulfilled:function fulfilled(state){state.numDispatches++;state.isLoading=false;},rejected:function rejected(state,_ref9){var errorMessage=_ref9.payload;state.isLoading=false;alert(errorMessage);}};","map":{"version":3,"names":["createSlice","createAsyncThunk","thunkPromiseHandler","protectedRequest","thunks","fetchTodos","_","thunkAPI","get","createTodo","todo","post","updateTodo","put","_id","deleteTodo","delete","deleteAll","name","initialState","isLoading","todos","numDispatches","reducers","clearTodos","state","extraReducers","addCase","pending","fulfilled","payload","rejected","errorMessage","alert","helper","methods","forEach","n","reducer","actions"],"sources":["/Users/nirness/Desktop/mern-todos-application/client/src/global/slices/todosSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\"\nimport protectedRequest from \"../../scripts/protectedRequest\"\n\nexport const thunks = {\n    fetchTodos : createAsyncThunk(\"todos/fetchTodos\", async (_, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().get(\"/api/todos/me\"), thunkAPI)\n    )),\n    createTodo : createAsyncThunk(\"todos/createTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().post(\"/api/todos\", todo), thunkAPI)\n    )),\n    updateTodo : createAsyncThunk(\"todos/updateTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().put(`/api/todos/${todo._id}`, todo), thunkAPI)\n    )),\n    deleteTodo : createAsyncThunk(\"todos/deleteTodo\", async (todo, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().delete(`/api/todos/${todo._id}`), thunkAPI)\n    )),\n    deleteAll : createAsyncThunk(\"todos/deleteAll\", async (_, thunkAPI) => (\n        thunkPromiseHandler(protectedRequest().delete(\"/api/todos/me\"), thunkAPI)\n    )),\n}\n\nexport const { reducer, actions } = createSlice({\n    name: \"todos\", \n    initialState : {\n        isLoading : false, \n        todos : [],\n        numDispatches : 0\n    },\n    reducers : {\n        clearTodos (state) {\n            state.todos = []\n            state.numDispatches = 0\n        }\n     },\n    extraReducers({addCase}) {\n        addCase(thunks.fetchTodos.pending, (state) => {\n            state.isLoading = true\n        })\n        addCase(thunks.fetchTodos.fulfilled, (state, { payload:todos }) => {\n            state.isLoading = false\n            state.todos = todos\n        })\n        addCase(thunks.fetchTodos.rejected, (state, { payload:errorMessage}) => {\n            state.isLoading = false\n            alert(errorMessage)\n        })\n        //add cases to all the thunks except fetchtodos\n        helper.methods.forEach((n) => {\n            addCase(thunks[n].pending, helper.pending)\n            addCase(thunks[n].fulfilled, helper.fulfilled)\n            addCase(thunks[n].rejected, helper.rejected)\n        })\n    }\n})\n\nconst helper = {\n    methods : [\"createTodo\", \"updateTodo\", \"deleteTodo\", \"deleteAll\" ],\n    pending (state) {\n        state.isLoading = true\n    },\n    fulfilled (state) {\n        state.numDispatches++\n        state.isLoading = false\n    },\n    rejected (state, { payload:errorMessage }) {\n        state.isLoading = false\n        alert(errorMessage)\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}