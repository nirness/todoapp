{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\";\nexport const thunks = {\n  register: createAsyncThunk(\"users/register\", async (form, thunkAPI) => thunkPromiseHandler(axios.post(\"/api/users/register\", form), thunkAPI)),\n  login: createAsyncThunk(\"users/login\", async (form, thunkAPI) => thunkPromiseHandler(axios.post(\"/api/users/login\", form), thunkAPI))\n};\nexport const {\n  reducer,\n  actions\n} = createSlice({\n  name: \"users\",\n  initialState: {\n    isLoading: false,\n    user: window.localStorage.getItem\n  },\n  reducers: {\n    logout() {//define later\n    }\n\n  },\n\n  extraReducers(_ref) {\n    let {\n      addCase\n    } = _ref;\n    helper.methods.forEach(n => {\n      addCase(thunks[n].pending, helper.registerAndLoginPending);\n      addCase(thunks[n].fulfilled, helper.registerAndLoginFulfilled);\n      addCase(thunks[n].rejected, helper.registerAndLoginRejected);\n    });\n  }\n\n});\nconst helper = {\n  methods: [\"login\", \"register\"],\n\n  registerAndLoginPending(state) {\n    state.isLoading = true;\n  },\n\n  registerAndLoginFulfilled(state, _ref2) {\n    let {\n      payload: user\n    } = _ref2;\n    state.isLoading = false;\n    state.user = user;\n    window.localStorage.setItem(\"user\", JSON.stringify(user));\n  },\n\n  registerAndLoginRejected(state, _ref3) {\n    let {\n      payload: errorMessage\n    } = _ref3;\n    state.isLoading = false;\n    alert(errorMessage || \"Auth Rejected\");\n  }\n\n};","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","thunkPromiseHandler","thunks","register","form","thunkAPI","post","login","reducer","actions","name","initialState","isLoading","user","window","localStorage","getItem","reducers","logout","extraReducers","addCase","helper","methods","forEach","n","pending","registerAndLoginPending","fulfilled","registerAndLoginFulfilled","rejected","registerAndLoginRejected","state","payload","setItem","JSON","stringify","errorMessage","alert"],"sources":["/Users/nirness/Desktop/mern-todos-application/client/src/global/slices/usersSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"\nimport  axios from \"axios\"\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\"\n\nexport const thunks = {\n    register: createAsyncThunk(\"users/register\", async (form, thunkAPI) => (\n        thunkPromiseHandler(axios.post(\"/api/users/register\", form), thunkAPI)\n    )),\n    login: createAsyncThunk(\"users/login\", async (form, thunkAPI) => (\n        thunkPromiseHandler(axios.post(\"/api/users/login\", form), thunkAPI)\n    ))\n}\n\nexport const { reducer, actions } = createSlice({\n    name: \"users\", \n    initialState : {\n        isLoading : false, \n        user : window.localStorage.getItem\n    },\n    reducers : {\n        logout() {\n            //define later\n        }\n    },\n    extraReducers({ addCase }) {\n        helper.methods.forEach((n) => {\n            addCase(thunks[n].pending, helper.registerAndLoginPending)\n            addCase(thunks[n].fulfilled, helper.registerAndLoginFulfilled)\n            addCase(thunks[n].rejected, helper.registerAndLoginRejected)\n        })\n    }\n})\n\nconst helper = {\n    methods : [\"login\", \"register\"],\n    registerAndLoginPending (state) {\n        state.isLoading = true\n    },\n    registerAndLoginFulfilled (state, { payload:user }) {\n        state.isLoading = false\n        state.user = user\n        window.localStorage.setItem(\"user\", JSON.stringify(user))\n    },\n    registerAndLoginRejected (state, { payload:errorMessage }) {\n        state.isLoading = false\n        alert(errorMessage || \"Auth Rejected\")\n    },\n}"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AACA,OAAQC,KAAR,MAAmB,OAAnB;AACA,OAAOC,mBAAP,MAAgC,mCAAhC;AAEA,OAAO,MAAMC,MAAM,GAAG;EAClBC,QAAQ,EAAEJ,gBAAgB,CAAC,gBAAD,EAAmB,OAAOK,IAAP,EAAaC,QAAb,KACzCJ,mBAAmB,CAACD,KAAK,CAACM,IAAN,CAAW,qBAAX,EAAkCF,IAAlC,CAAD,EAA0CC,QAA1C,CADG,CADR;EAIlBE,KAAK,EAAER,gBAAgB,CAAC,aAAD,EAAgB,OAAOK,IAAP,EAAaC,QAAb,KACnCJ,mBAAmB,CAACD,KAAK,CAACM,IAAN,CAAW,kBAAX,EAA+BF,IAA/B,CAAD,EAAuCC,QAAvC,CADA;AAJL,CAAf;AASP,OAAO,MAAM;EAAEG,OAAF;EAAWC;AAAX,IAAuBX,WAAW,CAAC;EAC5CY,IAAI,EAAE,OADsC;EAE5CC,YAAY,EAAG;IACXC,SAAS,EAAG,KADD;IAEXC,IAAI,EAAGC,MAAM,CAACC,YAAP,CAAoBC;EAFhB,CAF6B;EAM5CC,QAAQ,EAAG;IACPC,MAAM,GAAG,CACL;IACH;;EAHM,CANiC;;EAW5CC,aAAa,OAAc;IAAA,IAAb;MAAEC;IAAF,CAAa;IACvBC,MAAM,CAACC,OAAP,CAAeC,OAAf,CAAwBC,CAAD,IAAO;MAC1BJ,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUC,OAAX,EAAoBJ,MAAM,CAACK,uBAA3B,CAAP;MACAN,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUG,SAAX,EAAsBN,MAAM,CAACO,yBAA7B,CAAP;MACAR,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUK,QAAX,EAAqBR,MAAM,CAACS,wBAA5B,CAAP;IACH,CAJD;EAKH;;AAjB2C,CAAD,CAAxC;AAoBP,MAAMT,MAAM,GAAG;EACXC,OAAO,EAAG,CAAC,OAAD,EAAU,UAAV,CADC;;EAEXI,uBAAuB,CAAEK,KAAF,EAAS;IAC5BA,KAAK,CAACnB,SAAN,GAAkB,IAAlB;EACH,CAJU;;EAKXgB,yBAAyB,CAAEG,KAAF,SAA2B;IAAA,IAAlB;MAAEC,OAAO,EAACnB;IAAV,CAAkB;IAChDkB,KAAK,CAACnB,SAAN,GAAkB,KAAlB;IACAmB,KAAK,CAAClB,IAAN,GAAaA,IAAb;IACAC,MAAM,CAACC,YAAP,CAAoBkB,OAApB,CAA4B,MAA5B,EAAoCC,IAAI,CAACC,SAAL,CAAetB,IAAf,CAApC;EACH,CATU;;EAUXiB,wBAAwB,CAAEC,KAAF,SAAmC;IAAA,IAA1B;MAAEC,OAAO,EAACI;IAAV,CAA0B;IACvDL,KAAK,CAACnB,SAAN,GAAkB,KAAlB;IACAyB,KAAK,CAACD,YAAY,IAAI,eAAjB,CAAL;EACH;;AAbU,CAAf"},"metadata":{},"sourceType":"module"}