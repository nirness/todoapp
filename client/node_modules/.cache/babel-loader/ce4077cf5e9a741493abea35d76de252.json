{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nirness/Desktop/mern-todos-application/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nirness/Desktop/mern-todos-application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";import thunkPromiseHandler from\"../../scripts/thunkPromiseHandler\";export var thunks={register:createAsyncThunk(\"users/register\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(form,thunkAPI){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",thunkPromiseHandler(axios.post(\"/api/users/register\",form),thunkAPI));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}()),login:createAsyncThunk(\"users/login\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(form,thunkAPI){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",thunkPromiseHandler(axios.post(\"/api/users/login\",form),thunkAPI));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}())};var _createSlice=createSlice({name:\"users\",initialState:{isLoading:false,user:JSON.parse(window.localStorage.getItem(\"user\"))},reducers:{logout:function logout(){//define later\n}},extraReducers:function extraReducers(_ref3){var addCase=_ref3.addCase;helper.methods.forEach(function(n){addCase(thunks[n].pending,helper.registerAndLoginPending);addCase(thunks[n].fulfilled,helper.registerAndLoginFulfilled);addCase(thunks[n].rejected,helper.registerAndLoginRejected);});}}),reducer=_createSlice.reducer,actions=_createSlice.actions;export{reducer,actions};var helper={methods:[\"login\",\"register\"],registerAndLoginPending:function registerAndLoginPending(state){state.isLoading=true;},registerAndLoginFulfilled:function registerAndLoginFulfilled(state,_ref4){var user=_ref4.payload;state.isLoading=false;state.user=user;window.localStorage.setItem(\"user\",JSON.stringify(user));},registerAndLoginRejected:function registerAndLoginRejected(state,_ref5){var errorMessage=_ref5.payload;state.isLoading=false;alert(errorMessage||\"Auth Rejected\");}};","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","thunkPromiseHandler","thunks","register","form","thunkAPI","post","login","name","initialState","isLoading","user","JSON","parse","window","localStorage","getItem","reducers","logout","extraReducers","addCase","helper","methods","forEach","n","pending","registerAndLoginPending","fulfilled","registerAndLoginFulfilled","rejected","registerAndLoginRejected","reducer","actions","state","payload","setItem","stringify","errorMessage","alert"],"sources":["/Users/nirness/Desktop/mern-todos-application/client/src/global/slices/usersSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"\nimport  axios from \"axios\"\nimport thunkPromiseHandler from \"../../scripts/thunkPromiseHandler\"\n\nexport const thunks = {\n    register: createAsyncThunk(\"users/register\", async (form, thunkAPI) => (\n        thunkPromiseHandler(axios.post(\"/api/users/register\", form), thunkAPI)\n    )),\n    login: createAsyncThunk(\"users/login\", async (form, thunkAPI) => (\n        thunkPromiseHandler(axios.post(\"/api/users/login\", form), thunkAPI)\n    ))\n}\n\nexport const { reducer, actions } = createSlice({\n    name: \"users\", \n    initialState : {\n        isLoading : false, \n        user : JSON.parse(window.localStorage.getItem(\"user\"))\n    },\n    reducers : {\n        logout() {\n            //define later\n        }\n    },\n    extraReducers({ addCase }) {\n        helper.methods.forEach((n) => {\n            addCase(thunks[n].pending, helper.registerAndLoginPending)\n            addCase(thunks[n].fulfilled, helper.registerAndLoginFulfilled)\n            addCase(thunks[n].rejected, helper.registerAndLoginRejected)\n        })\n    }\n})\n\nconst helper = {\n    methods : [\"login\", \"register\"],\n    registerAndLoginPending (state) {\n        state.isLoading = true\n    },\n    registerAndLoginFulfilled (state, { payload:user }) {\n        state.isLoading = false\n        state.user = user\n        window.localStorage.setItem(\"user\", JSON.stringify(user))\n    },\n    registerAndLoginRejected (state, { payload:errorMessage }) {\n        state.isLoading = false\n        alert(errorMessage || \"Auth Rejected\")\n    },\n}"],"mappings":"oSAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAQC,MAAR,KAAmB,OAAnB,CACA,MAAOC,oBAAP,KAAgC,mCAAhC,CAEA,MAAO,IAAMC,OAAM,CAAG,CAClBC,QAAQ,CAAEJ,gBAAgB,CAAC,gBAAD,4FAAmB,iBAAOK,IAAP,CAAaC,QAAb,oJACzCJ,mBAAmB,CAACD,KAAK,CAACM,IAAN,CAAW,qBAAX,CAAkCF,IAAlC,CAAD,CAA0CC,QAA1C,CADsB,wDAAnB,mEADR,CAIlBE,KAAK,CAAER,gBAAgB,CAAC,aAAD,6FAAgB,kBAAOK,IAAP,CAAaC,QAAb,yJACnCJ,mBAAmB,CAACD,KAAK,CAACM,IAAN,CAAW,kBAAX,CAA+BF,IAA/B,CAAD,CAAuCC,QAAvC,CADgB,0DAAhB,qEAJL,CAAf,CASA,iBAA6BP,WAAW,CAAC,CAC5CU,IAAI,CAAE,OADsC,CAE5CC,YAAY,CAAG,CACXC,SAAS,CAAG,KADD,CAEXC,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAFI,CAF6B,CAM5CC,QAAQ,CAAG,CACPC,MADO,kBACE,CACL;AACH,CAHM,CANiC,CAW5CC,aAX4C,8BAWjB,IAAXC,QAAW,OAAXA,OAAW,CACvBC,MAAM,CAACC,OAAP,CAAeC,OAAf,CAAuB,SAACC,CAAD,CAAO,CAC1BJ,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUC,OAAX,CAAoBJ,MAAM,CAACK,uBAA3B,CAAP,CACAN,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUG,SAAX,CAAsBN,MAAM,CAACO,yBAA7B,CAAP,CACAR,OAAO,CAAClB,MAAM,CAACsB,CAAD,CAAN,CAAUK,QAAX,CAAqBR,MAAM,CAACS,wBAA5B,CAAP,CACH,CAJD,EAKH,CAjB2C,CAAD,CAAxC,CAAQC,OAAR,cAAQA,OAAR,CAAiBC,OAAjB,cAAiBA,OAAjB,C,wBAoBP,GAAMX,OAAM,CAAG,CACXC,OAAO,CAAG,CAAC,OAAD,CAAU,UAAV,CADC,CAEXI,uBAFW,kCAEcO,KAFd,CAEqB,CAC5BA,KAAK,CAACvB,SAAN,CAAkB,IAAlB,CACH,CAJU,CAKXkB,yBALW,oCAKgBK,KALhB,OAKyC,IAARtB,KAAQ,OAAhBuB,OAAgB,CAChDD,KAAK,CAACvB,SAAN,CAAkB,KAAlB,CACAuB,KAAK,CAACtB,IAAN,CAAaA,IAAb,CACAG,MAAM,CAACC,YAAP,CAAoBoB,OAApB,CAA4B,MAA5B,CAAoCvB,IAAI,CAACwB,SAAL,CAAezB,IAAf,CAApC,EACH,CATU,CAUXmB,wBAVW,mCAUeG,KAVf,OAUgD,IAAhBI,aAAgB,OAAxBH,OAAwB,CACvDD,KAAK,CAACvB,SAAN,CAAkB,KAAlB,CACA4B,KAAK,CAACD,YAAY,EAAI,eAAjB,CAAL,CACH,CAbU,CAAf"},"metadata":{},"sourceType":"module"}